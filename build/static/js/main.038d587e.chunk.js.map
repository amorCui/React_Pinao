{"version":3,"sources":["assets/videos/do.ogv","assets/videos/re.ogv","assets/videos/mi.ogv","assets/videos/fa.ogv","assets/videos/so.ogv","assets/videos/la.ogv","assets/videos/xi.ogv","assets/videos/do2.ogv","assets/videos/do3.ogv","assets/videos/re3.ogv","assets/videos/mi3.ogv","assets/videos/fa3.ogv","assets/videos/so3.ogv","components/PianoKey/PianoKey.js","components/Piano/Piano.js","assets/javascript/song.js","components/PianoController/PianoController.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","audios","Do","Re","Mi","Fa","So","La","Xi","Do2","Do3","Re3","Mi3","Fa3","So3","keyType","white","black","PianoKey","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","audioPlay","e","type","audioCreate","key","toLowerCase","keyBind","setState","state","audioMap","push","index","count","url","musicBind","assign","audioRemove","audioKey","shift","bind","assertThisInitialized","onKeyDownEventHandler","isEdit","press","onKeyUpEventHandler","onClickEventHandler","editing","console","log","onMouseUpEventHandler","document","addEventListener","removeEventListener","KeyRender","_this2","react_default","a","createElement","ref","className","onMouseDown","onMouseUp","map","val","data-index","autoPlay","src","onEnded","customStyleName","React","Component","defaultProps","Piano","that","musicbind","PianoRender","keyObj","components_PianoKey_PianoKey","song","PianoCmp","editStateChangeHandler","assPinaos","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","piano","value","assPiano","err","return","keyPress","asspianos","forEach","asspiano","toUpperCase","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","fireKeyEvent","el","evtType","keyCode","evtObj","doc","ownerDocument","win","defaultView","parentWindow","createEvent","KeyEvent","initKeyEvent","defineProperty","get","keyCodeVal","initUIEvent","which","dispatchEvent","createEventObject","fireEvent","onClick","components_Piano_Piano","App","PianoController_PianoController","Boolean","window","location","hostname","match","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.038d587e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/do.08b0bb7e.ogv\";","module.exports = __webpack_public_path__ + \"static/media/re.7502b5f8.ogv\";","module.exports = __webpack_public_path__ + \"static/media/mi.f7e63574.ogv\";","module.exports = __webpack_public_path__ + \"static/media/fa.9db6dbc8.ogv\";","module.exports = __webpack_public_path__ + \"static/media/so.77c9eda9.ogv\";","module.exports = __webpack_public_path__ + \"static/media/la.9c309ded.ogv\";","module.exports = __webpack_public_path__ + \"static/media/xi.0f5ee7fd.ogv\";","module.exports = __webpack_public_path__ + \"static/media/do2.35cd5786.ogv\";","module.exports = __webpack_public_path__ + \"static/media/do3.3a6a51d2.ogv\";","module.exports = __webpack_public_path__ + \"static/media/re3.b5b7119a.ogv\";","module.exports = __webpack_public_path__ + \"static/media/mi3.bf61633f.ogv\";","module.exports = __webpack_public_path__ + \"static/media/fa3.c5c50bfa.ogv\";","module.exports = __webpack_public_path__ + \"static/media/so3.870a3654.ogv\";","import React from 'react'\r\n// import PropTypes from 'prop-types';\r\n\r\nimport Do from '../../assets/videos/do.ogv';\r\nimport Re from '../../assets/videos/re.ogv';\r\nimport Mi from '../../assets/videos/mi.ogv';\r\nimport Fa from '../../assets/videos/fa.ogv';\r\nimport So from '../../assets/videos/so.ogv';\r\nimport La from '../../assets/videos/la.ogv';\r\nimport Xi from '../../assets/videos/xi.ogv';\r\nimport Do2 from '../../assets/videos/do2.ogv';\r\nimport Do3 from '../../assets/videos/do3.ogv';\r\nimport Re3 from '../../assets/videos/re3.ogv';\r\nimport Mi3 from '../../assets/videos/mi3.ogv';\r\nimport Fa3 from '../../assets/videos/fa3.ogv';\r\nimport So3 from '../../assets/videos/so3.ogv';\r\nimport './PianoKey.css';\r\n\r\nconst audios={\r\n    'Do':Do,\r\n    'Re':Re,\r\n    'Mi':Mi,\r\n    'Fa':Fa,\r\n    'So':So,\r\n    'La':La,\r\n    'Xi':Xi,\r\n    'Do2':Do2,\r\n    'Do3':Do3,\r\n    'Re3':Re3,\r\n    'Mi3':Mi3,\r\n    'Fa3':Fa3,\r\n    'So3':So3\r\n\r\n};\r\n\r\nconst keyType = {\r\n    white:'whitekey',\r\n    black:'blackkey'\r\n};\r\n\r\nclass PianoKey extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        //点击过的这个key的map\r\n        this.state = {\r\n            // keyType:{\r\n            //     white:'whiteKey',\r\n            //     black:'blackKey'\r\n            // },          //\r\n            audioMap:[],   //按下的audio的dom节点数组{index,url}\r\n            count:0,        //计数\r\n            press:false    //按下状态\r\n        };\r\n\r\n    } \r\n\r\n    /**\r\n     * 播放音频事件\r\n     */\r\n    audioPlay = (e) => {\r\n        //如果是鼠标点击事件\r\n        if(e.type === 'mousedown'){\r\n            // let currentAudio = this.audioCreate();\r\n            this.audioCreate();\r\n            // currentAudio.play();\r\n\r\n        }\r\n        //如果是键盘事件\r\n        if(e.type === 'keydown'){\r\n            if (e.key.toLowerCase() === this.props.keyBind.toLowerCase()) {\r\n                this.audioCreate();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 动态创建audio元素并添加到指定的dom节点中\r\n     */\r\n    audioCreate = ()=>{\r\n        \r\n        this.setState((state)=>{\r\n            state.audioMap.push({\r\n                index:++state.count,\r\n                url:audios[this.props.musicBind]\r\n            });\r\n\r\n            // var arr=state.audioMap.concat([audios[this.props.musicBind]])\r\n            return {\r\n                // audioMap:arr\r\n                audioMap:Object.assign(state.audioMap),\r\n                count:state.count\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * 播放完成之后移除audio\r\n     */\r\n    audioRemove =(audioKey) =>{\r\n        return function(audioKey){\r\n           \r\n            this.setState((state) =>{\r\n                // var arr;\r\n                // if(this.state.audioMap.length > 0){\r\n                //     arr = this.state.audioMap.slice(0,this.state.audioMap.length - 1);\r\n                // }\r\n                state.audioMap.shift();\r\n                return {\r\n                    // audioMap:arr\r\n                    audioMap:state.audioMap\r\n                }\r\n            });\r\n        }.bind(this);\r\n    }\r\n\r\n    /**\r\n     * 键盘按下时触发的事件\r\n     */\r\n    onKeyDownEventHandler = (e)=>{\r\n        if(!this.props.isEdit){\r\n            //非编辑状态\r\n            if(e.key.toLowerCase() === this.props.keyBind.toLowerCase()){\r\n                this.setState({\r\n                    press:true\r\n                });\r\n            }\r\n            \r\n            this.audioPlay(e);\r\n        }else{\r\n            //编辑状态\r\n            // console.log('键盘事件编辑状态')\r\n            // console.log(this.props.musicBind);\r\n            this.props.onKeyDownEventHandler(e,this);\r\n        }\r\n        \r\n    }\r\n\r\n    onKeyUpEventHandler = (e)=>{\r\n        if(!this.props.isEdit){\r\n            //非编辑状态\r\n            if(e.key.toLowerCase() === this.props.keyBind.toLowerCase()){\r\n                this.setState({\r\n                    press:false\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 鼠标点击时触发的事件\r\n     */\r\n    onClickEventHandler = (e) =>{\r\n        if(!this.props.isEdit){\r\n            //非编辑状态\r\n            this.setState({\r\n                press:true\r\n            });\r\n            this.audioPlay(e);\r\n        }else{\r\n            this.props.onClickEventHandler(this.props.musicBind,this.props.editing);\r\n            //编辑状态\r\n            console.log('鼠标点击编辑状态');\r\n            console.log(this.props.musicBind);\r\n        }\r\n    }\r\n\r\n    onMouseUpEventHandler = (e)=>{\r\n        //非编辑状态鼠标抬起时移除点击样式\r\n        console.log(e.type);\r\n        this.setState({\r\n            press:false\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 组件挂载时触发的事件\r\n     */\r\n    componentDidMount() {\r\n        \r\n        document.addEventListener('keydown', this.onKeyDownEventHandler);\r\n        document.addEventListener('keyup',this.onKeyUpEventHandler);\r\n    }\r\n\r\n    /**\r\n     * 组件卸载时触发的事件\r\n     */\r\n    componentWillUnmount()\r\n    {\r\n        document.removeEventListener('keydown', this.onKeyDownEventHandler);\r\n        document.removeEventListener('keydown', this.onKeyUpEventHandler);\r\n    }\r\n\r\n    render() {\r\n        let KeyRender;\r\n\r\n        KeyRender = (\r\n            <div ref='pianokey__content' \r\n                className= {'pianokey__content ' + (this.props.editing?'pianokey__content_editing':'') + (this.state.press?'pianokey__content_press':'')} \r\n                onMouseDown ={this.onClickEventHandler}\r\n                onMouseUp = {this.onMouseUpEventHandler}>\r\n                <div className='pianokeybind'>{this.props.keyBind}</div>\r\n                {   \r\n                    <div className='pianokey__mask'>\r\n                        <div className='pianokey__mask__content'>点击任意键已编辑</div>\r\n                    </div>\r\n                }\r\n                {\r\n                    this.state.audioMap.map(\r\n                        (val,key) =>\r\n                        <audio data-index={'audio'+ val.index} autoPlay key={'audio'+ val.index} src={val.url} onEnded={this.audioRemove(key)}></audio>\r\n                    )\r\n                }\r\n            </div>   \r\n        );\r\n\r\n    \r\n        \r\n        return (\r\n            <div className={'pianokey pianokey_' + keyType[this.props.type] + ' ' + this.props.customStyleName} >\r\n\r\n                {KeyRender}\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nPianoKey.defaultProps = {\r\n    type:'white',\r\n    keyBind: 'A',\r\n    musicBind: 'A6',\r\n    customStyleName:'',\r\n    isEdit:false, // 是否处于可编辑状态\r\n    editing:false // 正在编辑该按键\r\n}\r\n\r\n// PianoKey.prototype = {\r\n//     changeKeyEventHandler:PropTypes.func\r\n// }\r\n\r\nexport default PianoKey;","import React from 'react';\r\n\r\nimport './Piano.css';\r\n// import './Piano.less';\r\nimport PianoKey from '../PianoKey/PianoKey.js';\r\n// import '../../../node_modules/less/dist/less.js';\r\n\r\n\r\nclass Piano extends React.Component {\r\n    // constructor(props) {\r\n    //     super(props);\r\n\r\n    //     // this.state = {\r\n    //     //     Piano:[\r\n    //     //         {keyBind:'A',musicBind:'Do'},\r\n    //     //         {keyBind:'W',musicBind:'Do3',type:'black'},\r\n    //     //         {keyBind:'S',musicBind:'Re'},\r\n    //     //         {keyBind:'E',musicBind:'Re3',type:'black'},\r\n    //     //         {keyBind:'D',musicBind:'Mi'},\r\n    //     //         {keyBind:'F',musicBind:'Fa'},\r\n    //     //         {keyBind:'T',musicBind:'Mi3',type:'black'},\r\n    //     //         {keyBind:'G',musicBind:'So'},\r\n    //     //         {keyBind:'Y',musicBind:'Fa3',type:'black'},\r\n    //     //         {keyBind:'H',musicBind:'La'},\r\n    //     //         {keyBind:'U',musicBind:'So3',type:'black'},\r\n    //     //         {keyBind:'J',musicBind:'Xi'},\r\n    //     //         {keyBind:'K',musicBind:'Do2'}\r\n    //     //     ]\r\n    //     // }\r\n\r\n    //     //如果传递了Keys\r\n    // }\r\n\r\n   \r\n    \r\n    // onKeyDownEventHandler = (e)=>{\r\n    //     // console.log(this);\r\n    //     if(this.editing){\r\n    //         //编辑中的话判断\r\n    //         console.log(e.key);\r\n    //         console.log(this.musicBind);\r\n    //     }\r\n    // }\r\n    \r\n/**\r\n     * 键盘按下时触发的事件\r\n     */\r\n    onKeyDownEventHandler = (e,that)=>{\r\n        console.log('Piano组件的键盘按下事件');\r\n        this.props.onKeyDownEventHandler(e,that);\r\n    }\r\n\r\n     /**\r\n     * 鼠标点击时触发的事件\r\n     */\r\n    onClickEventHandler = (musicbind,editing) =>{\r\n        console.log('Piano组件的鼠标点击事件');\r\n        this.props.onClickEventHandler(musicbind,editing);\r\n    }\r\n\r\n\r\n    render() {\r\n        let PianoRender;\r\n        PianoRender = (\r\n           this.props.Piano.map((keyObj,key)=>(\r\n                <PianoKey \r\n                    onClickEventHandler={this.onClickEventHandler} \r\n                    onKeyDownEventHandler={this.onKeyDownEventHandler} \r\n                    isEdit={this.props.isEdit} key={key} {...keyObj}>\r\n                </PianoKey>\r\n           ))\r\n        );\r\n\r\n        return (\r\n            <div className='piano'>\r\n                {PianoRender}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nPiano.defaultProps ={\r\n    isEdit:false,\r\n    Piano:[\r\n        {keyBind:'A',musicBind:'Do'},\r\n        {keyBind:'W',musicBind:'Do3',type:'black'},\r\n        {keyBind:'S',musicBind:'Re'},\r\n        {keyBind:'E',musicBind:'Re3',type:'black'},\r\n        {keyBind:'D',musicBind:'Mi'},\r\n        {keyBind:'F',musicBind:'Fa'},\r\n        {keyBind:'T',musicBind:'Mi3',type:'black'},\r\n        {keyBind:'G',musicBind:'So'},\r\n        {keyBind:'Y',musicBind:'Fa3',type:'black'},\r\n        {keyBind:'H',musicBind:'La'},\r\n        {keyBind:'U',musicBind:'So3',type:'black'},\r\n        {keyBind:'J',musicBind:'Xi'},\r\n        {keyBind:'K',musicBind:'Do2'}\r\n    ]\r\n}\r\n\r\nexport default Piano;","export const song = [\r\n    6,\r\n    7,\r\n    1,\r\n    7,\r\n    1,\r\n    3,\r\n    7,\r\n    '',\r\n    '',\r\n    3,\r\n    3,\r\n    6,\r\n    5,\r\n    6,\r\n    1,\r\n    5,\r\n    '',\r\n    3,\r\n    3,\r\n]","import React from 'react'\r\nimport Piano from '../Piano/Piano'\r\nimport './PianoController.css'\r\nimport {song} from '../../assets/javascript/song.js'\r\n// import {keyMap} from '../../assets/javascript/keyMap.js'\r\n\r\n\r\nclass PianoCmp extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { \r\n            isEdit:false,\r\n            Piano:[\r\n                {keyBind:'A',musicBind:'Do'},\r\n                {keyBind:'W',musicBind:'Do3',type:'black'},\r\n                {keyBind:'S',musicBind:'Re'},\r\n                {keyBind:'E',musicBind:'Re3',type:'black'},\r\n                {keyBind:'D',musicBind:'Mi'},\r\n                {keyBind:'F',musicBind:'Fa'},\r\n                {keyBind:'T',musicBind:'Mi3',type:'black'},\r\n                {keyBind:'G',musicBind:'So'},\r\n                {keyBind:'Y',musicBind:'Fa3',type:'black'},\r\n                {keyBind:'H',musicBind:'La'},\r\n                {keyBind:'U',musicBind:'So3',type:'black'},\r\n                {keyBind:'J',musicBind:'Xi'},\r\n                {keyBind:'K',musicBind:'Do2'}\r\n            ]\r\n        };\r\n        console.log(song);\r\n    }\r\n\r\n    /**\r\n     * 编辑状态\r\n     */\r\n    editStateChangeHandler = (e)=>{\r\n        if(this.state.isEdit){\r\n            ////如果是从编辑到非编辑状态\r\n            //移除editing标记\r\n            let assPinaos = [];\r\n            for(let piano of this.state.Piano){\r\n                let assPiano = Object.assign(piano);\r\n                assPiano.editing = false;\r\n                assPinaos.push(assPiano);\r\n            }\r\n\r\n            this.setState((state)=>{\r\n                return {\r\n                    isEdit:!state.isEdit,\r\n                    Piano:assPinaos\r\n                }\r\n            });\r\n        }else{\r\n            this.setState((state)=>{\r\n                return {\r\n                    isEdit:!state.isEdit\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 键盘事件\r\n     */\r\n    onKeyDownEventHandler = function(e,that){\r\n        if(that.props.editing){\r\n            //编辑中的话判断\r\n            let keyPress = e.key;\r\n            let musicBind = that.props.musicBind;\r\n            let asspianos = [];\r\n            this.state.Piano.forEach(function(val,index){\r\n                let asspiano = Object.assign(val);\r\n                //先判断原始值是否存在，存在清空\r\n                if(asspiano.keyBind.toLowerCase() === keyPress.toLowerCase()){\r\n                    asspiano.keyBind = '';\r\n                }\r\n                //清空原始值之后，更新新绑定的按键值，如果存在\r\n                if(asspiano.musicBind.toLowerCase() === musicBind.toLowerCase()){\r\n                    asspiano.keyBind = e.key.toUpperCase();\r\n                }\r\n                asspianos.push(asspiano);\r\n            });\r\n            this.setState({\r\n                piano:asspianos\r\n            });\r\n        }\r\n    }.bind(this);\r\n\r\n    /**\r\n     * 点击鼠标事件\r\n     */\r\n    onClickEventHandler = (musicbind,editing)=>{\r\n        if(this.state.isEdit){\r\n            //1.如果当前按键处于编辑状态，取消编辑状态\r\n            if(editing){\r\n                this.setState((state)=>{\r\n                    let assPinaos = [];\r\n                    for(var piano of state.Piano){\r\n                        let assPiano = Object.assign(piano);\r\n                        if(assPiano.musicBind === musicbind){\r\n                            assPiano.editing = false;\r\n                        }\r\n                        assPinaos.push(assPiano);\r\n                    }\r\n\r\n                    return {\r\n                        Piano:assPinaos\r\n                    }\r\n                })\r\n            }else{\r\n                //2.如果当前按键不处于编辑状态，移除其他案件的编辑状态，将该按键状态更新为编辑中\r\n                this.setState((state)=>{\r\n                    let assPinaos = [];\r\n                    for(var piano of state.Piano){\r\n                        let assPiano = Object.assign(piano);\r\n                        if(assPiano.musicBind === musicbind){\r\n                            assPiano.editing = true;\r\n                        }else{\r\n                            assPiano.editing = false;\r\n                        }\r\n                        assPinaos.push(assPiano);\r\n                    }\r\n\r\n                    return {\r\n                        Piano:assPinaos\r\n                    }\r\n                })\r\n            }\r\n           \r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 模拟键盘事件\r\n     * @param el html元素\r\n     * @param evtType 事件类型\r\n     * @param keyCode 键值\r\n     */\r\n    fireKeyEvent = (el, evtType, keyCode,key)=>{  \r\n        var doc = el.ownerDocument?el.ownerDocument:el,  \r\n            win = doc.defaultView || doc.parentWindow,  \r\n            evtObj;  \r\n        if(doc.createEvent){  \r\n            if(win.KeyEvent) {  \r\n                evtObj = doc.createEvent('KeyEvents');  \r\n                evtObj.initKeyEvent( evtType, true, true, win, false, false, false, false, keyCode, key );  \r\n            }  \r\n            else {  \r\n                evtObj = doc.createEvent('UIEvents');  \r\n                Object.defineProperty(evtObj, 'keyCode', {  \r\n                    get : function() { return this.keyCodeVal; }  \r\n                });       \r\n                Object.defineProperty(evtObj, 'which', {  \r\n                    get : function() { return this.keyCodeVal; }  \r\n                });  \r\n        \r\n                evtObj.initUIEvent( evtType, true, true, win, 1 );  \r\n                evtObj.keyCodeVal = keyCode;  \r\n                evtObj.key = key;\r\n                if (evtObj.keyCode !== keyCode) {  \r\n                    console.log(\"keyCode \" + evtObj.keyCode + \" 和 (\" + evtObj.which + \") 不匹配\");  \r\n                }  \r\n            }  \r\n            el.dispatchEvent(evtObj);  \r\n        }else if(doc.createEventObject){  \r\n            evtObj = doc.createEventObject();  \r\n            evtObj.keyCode = keyCode;  \r\n            el.fireEvent('on' + evtType, evtObj);  \r\n        }  \r\n    }  \r\n\r\n    /**\r\n     * 自动播放\r\n     */\r\n    // autoPlay = (e)=>{\r\n    //     console.log('autoplay function');\r\n    //     const timeOut = 1000;\r\n    //     //计时\r\n    //     for(let index in song){\r\n    //         console.log(index,song[index]);\r\n    //         setTimeout(function(){\r\n    //             this.fireKeyEvent(document,'keydown','','a');\r\n    //             this.fireKeyEvent(document,'keyup','','a');\r\n    //         },timeOut).bind(this);\r\n    //     }\r\n        \r\n        \r\n    // }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className='ctl'>\r\n                    <button className='ctl__btn' onClick={this.editStateChangeHandler}>\r\n                        {this.state.isEdit?'Back':'Edit'}\r\n                    </button>\r\n\r\n                    {/* <button className='ctl__btn' onClick = {this.autoPlay}>\r\n                        auto play\r\n                    </button> */}\r\n\r\n                </div>\r\n                <Piano \r\n                        isEdit={this.state.isEdit}\r\n                        Piano={this.state.Piano}\r\n                        onClickEventHandler={this.onClickEventHandler}\r\n                        onKeyDownEventHandler={this.onKeyDownEventHandler}>\r\n                </Piano>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PianoCmp;","import React, { Component } from 'react';\n\nimport './assets/css/App.css';\n\n\nimport PianoController from './components/PianoController/PianoController'\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        \n        <PianoController></PianoController>\n        {/* <header className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <p>\n            Edit <code>src/App.js</code> and save to reload.\n          </p>\n          <a\n            className=\"App-link\"\n            href=\"https://reactjs.org\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Learn React\n          </a>\n        </header> */}\n      \n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './assets/css/index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}