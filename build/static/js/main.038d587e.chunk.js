(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,n,t){e.exports=t.p+"static/media/do.08b0bb7e.ogv"},function(e,n,t){e.exports=t.p+"static/media/re.7502b5f8.ogv"},function(e,n,t){e.exports=t.p+"static/media/mi.f7e63574.ogv"},function(e,n,t){e.exports=t.p+"static/media/fa.9db6dbc8.ogv"},function(e,n,t){e.exports=t.p+"static/media/so.77c9eda9.ogv"},function(e,n,t){e.exports=t.p+"static/media/la.9c309ded.ogv"},function(e,n,t){e.exports=t.p+"static/media/xi.0f5ee7fd.ogv"},function(e,n,t){e.exports=t.p+"static/media/do2.35cd5786.ogv"},function(e,n,t){e.exports=t.p+"static/media/do3.3a6a51d2.ogv"},function(e,n,t){e.exports=t.p+"static/media/re3.b5b7119a.ogv"},function(e,n,t){e.exports=t.p+"static/media/mi3.bf61633f.ogv"},function(e,n,t){e.exports=t.p+"static/media/fa3.c5c50bfa.ogv"},function(e,n,t){e.exports=t.p+"static/media/so3.870a3654.ogv"},function(e,n,t){e.exports=t(33)},,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var i=t(0),a=t.n(i),o=t(8),s=t.n(o),c=(t(28),t(2)),r=t(3),d=t(5),u=t(4),l=t(6),p=(t(29),t(1)),y=(t(30),t(9)),m=t.n(y),v=t(10),k=t.n(v),f=t(11),E=t.n(f),B=t(12),h=t.n(B),b=t(13),w=t.n(b),g=t(14),C=t.n(g),j=t(15),O=t.n(j),H=t(16),D=t.n(H),S=t(17),x=t.n(S),P=t(18),K=t.n(P),M=t(19),_=t.n(M),L=t(20),U=t.n(L),N=t(21),F=t.n(N),R=(t(31),{Do:m.a,Re:k.a,Mi:E.a,Fa:h.a,So:w.a,La:C.a,Xi:O.a,Do2:D.a,Do3:x.a,Re3:K.a,Mi3:_.a,Fa3:U.a,So3:F.a}),A={white:"whitekey",black:"blackkey"},W=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(d.a)(this,Object(u.a)(n).call(this,e))).audioPlay=function(e){"mousedown"===e.type&&t.audioCreate(),"keydown"===e.type&&e.key.toLowerCase()===t.props.keyBind.toLowerCase()&&t.audioCreate()},t.audioCreate=function(){t.setState(function(e){return e.audioMap.push({index:++e.count,url:R[t.props.musicBind]}),{audioMap:Object.assign(e.audioMap),count:e.count}})},t.audioRemove=function(e){return function(e){this.setState(function(e){return e.audioMap.shift(),{audioMap:e.audioMap}})}.bind(Object(p.a)(Object(p.a)(t)))},t.onKeyDownEventHandler=function(e){t.props.isEdit?t.props.onKeyDownEventHandler(e,Object(p.a)(Object(p.a)(t))):(e.key.toLowerCase()===t.props.keyBind.toLowerCase()&&t.setState({press:!0}),t.audioPlay(e))},t.onKeyUpEventHandler=function(e){t.props.isEdit||e.key.toLowerCase()===t.props.keyBind.toLowerCase()&&t.setState({press:!1})},t.onClickEventHandler=function(e){t.props.isEdit?(t.props.onClickEventHandler(t.props.musicBind,t.props.editing),console.log("\u9f20\u6807\u70b9\u51fb\u7f16\u8f91\u72b6\u6001"),console.log(t.props.musicBind)):(t.setState({press:!0}),t.audioPlay(e))},t.onMouseUpEventHandler=function(e){console.log(e.type),t.setState({press:!1})},t.state={audioMap:[],count:0,press:!1},t}return Object(l.a)(n,e),Object(r.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDownEventHandler),document.addEventListener("keyup",this.onKeyUpEventHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDownEventHandler),document.removeEventListener("keydown",this.onKeyUpEventHandler)}},{key:"render",value:function(){var e,n=this;return e=a.a.createElement("div",{ref:"pianokey__content",className:"pianokey__content "+(this.props.editing?"pianokey__content_editing":"")+(this.state.press?"pianokey__content_press":""),onMouseDown:this.onClickEventHandler,onMouseUp:this.onMouseUpEventHandler},a.a.createElement("div",{className:"pianokeybind"},this.props.keyBind),a.a.createElement("div",{className:"pianokey__mask"},a.a.createElement("div",{className:"pianokey__mask__content"},"\u70b9\u51fb\u4efb\u610f\u952e\u5df2\u7f16\u8f91")),this.state.audioMap.map(function(e,t){return a.a.createElement("audio",{"data-index":"audio"+e.index,autoPlay:!0,key:"audio"+e.index,src:e.url,onEnded:n.audioRemove(t)})})),a.a.createElement("div",{className:"pianokey pianokey_"+A[this.props.type]+" "+this.props.customStyleName},e)}}]),n}(a.a.Component);W.defaultProps={type:"white",keyBind:"A",musicBind:"A6",customStyleName:"",isEdit:!1,editing:!1};var J=W,V=function(e){function n(){var e,t;Object(c.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=Object(d.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(a)))).onKeyDownEventHandler=function(e,n){console.log("Piano\u7ec4\u4ef6\u7684\u952e\u76d8\u6309\u4e0b\u4e8b\u4ef6"),t.props.onKeyDownEventHandler(e,n)},t.onClickEventHandler=function(e,n){console.log("Piano\u7ec4\u4ef6\u7684\u9f20\u6807\u70b9\u51fb\u4e8b\u4ef6"),t.props.onClickEventHandler(e,n)},t}return Object(l.a)(n,e),Object(r.a)(n,[{key:"render",value:function(){var e,n=this;return e=this.props.Piano.map(function(e,t){return a.a.createElement(J,Object.assign({onClickEventHandler:n.onClickEventHandler,onKeyDownEventHandler:n.onKeyDownEventHandler,isEdit:n.props.isEdit,key:t},e))}),a.a.createElement("div",{className:"piano"},e)}}]),n}(a.a.Component);V.defaultProps={isEdit:!1,Piano:[{keyBind:"A",musicBind:"Do"},{keyBind:"W",musicBind:"Do3",type:"black"},{keyBind:"S",musicBind:"Re"},{keyBind:"E",musicBind:"Re3",type:"black"},{keyBind:"D",musicBind:"Mi"},{keyBind:"F",musicBind:"Fa"},{keyBind:"T",musicBind:"Mi3",type:"black"},{keyBind:"G",musicBind:"So"},{keyBind:"Y",musicBind:"Fa3",type:"black"},{keyBind:"H",musicBind:"La"},{keyBind:"U",musicBind:"So3",type:"black"},{keyBind:"J",musicBind:"Xi"},{keyBind:"K",musicBind:"Do2"}]};var I=V,X=(t(32),[6,7,1,7,1,3,7,"","",3,3,6,5,6,1,5,"",3,3]),G=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(d.a)(this,Object(u.a)(n).call(this,e))).editStateChangeHandler=function(e){if(t.state.isEdit){var n=[],i=!0,a=!1,o=void 0;try{for(var s,c=t.state.Piano[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var r=s.value,d=Object.assign(r);d.editing=!1,n.push(d)}}catch(u){a=!0,o=u}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}t.setState(function(e){return{isEdit:!e.isEdit,Piano:n}})}else t.setState(function(e){return{isEdit:!e.isEdit}})},t.onKeyDownEventHandler=function(e,n){if(n.props.editing){var t=e.key,i=n.props.musicBind,a=[];this.state.Piano.forEach(function(n,o){var s=Object.assign(n);s.keyBind.toLowerCase()===t.toLowerCase()&&(s.keyBind=""),s.musicBind.toLowerCase()===i.toLowerCase()&&(s.keyBind=e.key.toUpperCase()),a.push(s)}),this.setState({piano:a})}}.bind(Object(p.a)(Object(p.a)(t))),t.onClickEventHandler=function(e,n){t.state.isEdit&&(n?t.setState(function(n){var t=[],i=!0,a=!1,o=void 0;try{for(var s,c=n.Piano[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var r=s.value,d=Object.assign(r);d.musicBind===e&&(d.editing=!1),t.push(d)}}catch(u){a=!0,o=u}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return{Piano:t}}):t.setState(function(n){var t=[],i=!0,a=!1,o=void 0;try{for(var s,c=n.Piano[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var r=s.value,d=Object.assign(r);d.musicBind===e?d.editing=!0:d.editing=!1,t.push(d)}}catch(u){a=!0,o=u}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return{Piano:t}}))},t.fireKeyEvent=function(e,n,t,i){var a,o=e.ownerDocument?e.ownerDocument:e,s=o.defaultView||o.parentWindow;o.createEvent?(s.KeyEvent?(a=o.createEvent("KeyEvents")).initKeyEvent(n,!0,!0,s,!1,!1,!1,!1,t,i):(a=o.createEvent("UIEvents"),Object.defineProperty(a,"keyCode",{get:function(){return this.keyCodeVal}}),Object.defineProperty(a,"which",{get:function(){return this.keyCodeVal}}),a.initUIEvent(n,!0,!0,s,1),a.keyCodeVal=t,a.key=i,a.keyCode!==t&&console.log("keyCode "+a.keyCode+" \u548c ("+a.which+") \u4e0d\u5339\u914d")),e.dispatchEvent(a)):o.createEventObject&&((a=o.createEventObject()).keyCode=t,e.fireEvent("on"+n,a))},t.state={isEdit:!1,Piano:[{keyBind:"A",musicBind:"Do"},{keyBind:"W",musicBind:"Do3",type:"black"},{keyBind:"S",musicBind:"Re"},{keyBind:"E",musicBind:"Re3",type:"black"},{keyBind:"D",musicBind:"Mi"},{keyBind:"F",musicBind:"Fa"},{keyBind:"T",musicBind:"Mi3",type:"black"},{keyBind:"G",musicBind:"So"},{keyBind:"Y",musicBind:"Fa3",type:"black"},{keyBind:"H",musicBind:"La"},{keyBind:"U",musicBind:"So3",type:"black"},{keyBind:"J",musicBind:"Xi"},{keyBind:"K",musicBind:"Do2"}]},console.log(X),t}return Object(l.a)(n,e),Object(r.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",{className:"ctl"},a.a.createElement("button",{className:"ctl__btn",onClick:this.editStateChangeHandler},this.state.isEdit?"Back":"Edit")),a.a.createElement(I,{isEdit:this.state.isEdit,Piano:this.state.Piano,onClickEventHandler:this.onClickEventHandler,onKeyDownEventHandler:this.onKeyDownEventHandler}))}}]),n}(a.a.Component),T=function(e){function n(){return Object(c.a)(this,n),Object(d.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(l.a)(n,e),Object(r.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(G,null))}}]),n}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[22,1,2]]]);
//# sourceMappingURL=main.038d587e.chunk.js.map